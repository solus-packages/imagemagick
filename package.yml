name       : imagemagick
version    : 7.1.0_7
release    : 178
source     :
    - https://download.imagemagick.org/ImageMagick/download/ImageMagick-7.1.0-7.tar.xz : 7133d8c5b053c146e363a9c8f59cf695bc305b7858a2d0432bbbf9995f361b03
homepage   : https://imagemagick.org/
license    : Apache-2.0
component  : multimedia.graphics
summary    : ImageMagick® suite to create, edit, compose, or convert bitmap images
description: |
    ImageMagick® is a software suite to create, edit, compose, or convert bitmap images. It can read and write images in a variety of formats (over 200) including PNG, JPEG, JPEG-2000, GIF, TIFF, DPX, EXR, WebP, Postscript, PDF, and SVG. Use ImageMagick to resize, flip, mirror, rotate, distort, shear and transform images, adjust image colors, apply various special effects, or draw text, lines, polygons, ellipses and Bézier curves.
patterns   :
    - devel :
        - /usr/share/man/man3
    - docs :
        - /usr/share/doc
builddeps  :
    - pkgconfig(OpenEXR)
    - pkgconfig(ddjvuapi)
    - pkgconfig(fftw3)
    - pkgconfig(lcms2)
    - pkgconfig(libgvc)
    - pkgconfig(libheif)
    - pkgconfig(liblzma)
    - pkgconfig(libopenjp2)
    - pkgconfig(libraw)
    - pkgconfig(librsvg-2.0)
    - pkgconfig(libtiff-4)
    - pkgconfig(libturbojpeg)
    - pkgconfig(libxml-2.0)
    - pkgconfig(libwebp)
    - pkgconfig(libzstd)
    - pkgconfig(pangocairo)
    - pkgconfig(raqm)
    - bzip2-devel
    - ghostscript-devel
setup      : |
    %configure --disable-static \
               --enable-shared \
               --with-fftw \
               --with-gslib \
               --with-openjp2 \
               --with-perl \
               --with-rsvg
build      : |
    %make
install    : |
    %make_install
    privlib="%perl_privlib%"
    rm -rvf "$installdir/$privlib"

    # Use correct options for inkscape<1.0
    sed -e 's|--export-file|--export-png|' -i $installdir/etc/ImageMagick-7/delegates.xml
